# Chapter 03. 역할, 책임, 협력

> 협력 : 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용  
> 책임 : 객체가 협력에 참여하기 위해 수행하는 로직  
> 역할 : 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 **역할**을 구성

## 협력

- 메세지 전송 : 객체 사이의 협력을 위해 사용하는 유일한 커뮤니케이션 수단
    - **메서드**를 실행해 요청에 응답
    - 객체가 메시지를 처리할 방법을 스스로 선택 → 자율적 존재 객체 (캡슐화)
- 협력이 설계를 위한 문맥(**context**)을 결정한다.

## 책임

- 하는 것(doing)_무엇을 할 수 있는 가 & 아는 것(knowing)_무엇을 알고 있는가

| 하는 것  | 아는 것 |
| --- | --- |
| • 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것 | • 사적인 정보에 관해 아는 것 |
| • 다른 객체의 행동을 시작시키는 것 | • 관련된 객체에 관해 아는 것 |
| • 다른 객체의 활동을 제어하고 조절하는 것 | • 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것 |

- 책임 할당의 중요성 : 적절한 협력이 적절한 책임을 제공하고, 적절한 책임을 적절한 객체에 할당해야만 단순하고 유연한 설계를 창조할 수 있다.
- **INFORMATION EXPERT (정보 전문가 패턴)**
    - 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당
- **책임 주도 설계(Responsibility-Driven Design, RDD)**
    - 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다
    - 시스템 책임을 더 작은 책임으로 분할한다
    - 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다
    - 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다
    - 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다

### 책임을 할당할 때 고려해야할 요소

메시지가 객체를 결정한다
- 객체가 **최소한의 인터페이스(minimal interface)**를 가질 수 있게 됨 
- 객체는 충분히 **추상적인 인터페이스(abstract interface)**를 가질 수 있게 됨 

행동이 상태를 결정한다

- 객체의 행동 : 협력에 참여할 수 있는 유일한 방법
- 개별 객체의 상태와 행동이 아닌 시스템의 기능을 구현하기 위한 협력에 초점을 맞춰야 응집도가 높고 결합도가 낮은 객체들을 창조할 수 있음

## 역할

- 역할에 책임을 할당 → 유연하고 재사용 가능한 협력
- **다른 것으로 교체할 수 있는 책임의 집합**
- 추상화 → 동일한 책임을 수행하는 역할을 기반으로 두 개의 협력을 하나로 통합 → 중복 코드를 제거 & 협력이 유연해짐
- 협력에 참여하는 후보가 여러 종류의 객체에 의해 수행될 필요가 있다면 그 후보는 역할이 되지만 단지 한 종류의 객체만이 협력에 참여할 필요가 있다면 후보는 객체가 된다
- 이 객체가 무슨 역할을 수행해야 하는가?
    - 객체가 어떤 형태를 띠어야 하는지?
    - 어떤 동작을 해야 하는지?

협력 -(reference)→ 역할 -(select from) → 객체 -(instance of)→ 클래스

**역할과 추상화**

- 협력을 구체적인 객체가 아니라 추상적인 역할의 관점에서 설계하면 협력이 유연하고 재사용 가능해짐