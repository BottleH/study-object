## CHAPTER 03 _ 역할, 책임, 협력
> 객체 지향에서 가장 중요한 것은 역할, 책임, 협력이다.

### 협력
#### 영화 예매 시스템 돌아보기
사용자가 영화 여매 시스템을 통해 영화를 예매할 수 있게 하려면 다양한 객체들이 참여하는 협력을 구축해야 한다.
* 협력 : 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용
ex> 영화 예매 기능을 구현하기 위해 메세지를 통한 객체들 사이의 상호 작용
* 책임 : 객체가 협력에 참여하기 위해 수행하는 로직
* 역할 : 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 역

#### 협력
> 협력은 객체지향의 세계에서 기능을 구현할 수 있는 유일한 방법이다.
> 두 객체가 상호작용을 통해 더 큰 책임을 수행하는 것

* 메시지 전송 
 : 객체 사이의 협력을 위해 사용할 수 있는 커뮤니케이션 수단
 : 객체는 다른 객체의 상세한 내부 구현에 직접 접근할 수 없기 떄문에 오직 메시지 전송을 통해서만 자신의 요청을 전달 할 수 있다.
* 메서드 실행
 : 메시지를 수신한 객체는 메서드를 실행해 요청에 응답한다.
 : 객체가 메시지를 처리할 방법을 스스로 선택한다는 점이 중요
 : 외부 객체는 오직 메시지만 전송할 수 있을 뿐 메시지 처리는 수신한 객체가 직접 결정

> 자율적인 객체는 자신에게 할당된 책임을 수행하던 중 필요한 경우 적절한 객체에게 메시지를 전송해서 협력을 요청한다.
> 객체들 사이의 협력을 구성하는 일련의 요청과 응답의 흐름을 통해 애플리케이션의 기능이 구현된다.

#### 협력이 설계를 위한 문맥을 결정한다.
> 객체가 참여하는 협력이 객체를 구성하는 행동과 상태 모두를 결정한다.
> 협력은 객체를 설계하는 데 필요한 일종의 문맥을 제공한다.

### 책임
#### 책임이란 무엇인가
* 협력에 참여하기 위해 객체가 수행하는 행동
* 객체에 의해 정의되는 응집도 있는 행위의 집합
* 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개햑적으로 서술한 문장
* 객체 지향 설계에서 가장 중요한 것 -> 객체에게 얼마나 적절한 책임을 할당하느냐가 설계의 전체적인 품질을 결정한다.

```
크레이그 라만의 분류 체계에 의한 객체의 책임 분류
* 하는 것 
    : 객체를 생성하거나 계산을 수행하는 등의 스스로 하는것
    : 다른 객체의 행동을 시작시키는 것
    : 다른 객체의 활동을 제어하고 조절하는 것
* 아는 것 
    : 사적인 정보에 관해 아는 것
    : 관련된 객체에 관해 아는 것
    : 자신이 윧하거나 계산할 수 있는 것에 관해 아는 것
```
> 협력이 중요한 이유는 객체에게 할당할 책임을 결정할 수 있는 문맥을 제공하기 때문
> 적절한 협력이 적절한 책임을 제공하고, 적절한 책임을 적절한 객체에게 할당해야만 단순하고 유연한 설계를 창조할 수 있다.

#### 책임 할당
> 자율적인 객체를 만드는 가장 기본적인 방법은 책임을 수행하는 데 필요한 정보를 가장 잘 알고 있는 전문가에게 그 책임을 할당하는 것
= 책임 할당을 위한 [정보전문가 패턴]이라고 부른다.

* 객체에게 책임을 할당하기 위해서는
* 협력이라는 문맥을 정의
   1. 책임을 수행할 메시지 선택
   2. 메시지를 처리할 적절한 객체 선택 (관련 정보를 가장 많이 알고 있는 객체에게 책임 할당)
   3. 메시지 처리를 위해 추가적으로 필요한 정보 탐색
   4. 있다면 1. 책임을 수행할 메시지 선택 부터 반복~!

* 어떤 경우에는 응집도와 결할도의 관점에서 정보 전문가가 아닌 다른 객체에게 책임을 할당하는 것이 더 적절한 경우도 존재
* 기본적인 전략은 책임을 수행할 정보 전문가를 찾아 책임을 할당하는 것

#### 책인 주도 설계
책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 책임 주도 설계라고 부른다.

#### 메시지가 객체를 결정한다.
객체에게 책임을 할당하는 데 필요한 메시지를 먼저 식별하고 메시지를 처리할 객체를 나중에 선택했다는 것이 포인트!
객체가 메시지를 선택하는 것이 아니라 메시지가 객체를 선택하게 한것이 중요한 점

* 메시지가 객체를 선택하게 해야하는 두가지 중요한 이유
1. 객체가 최소한의 인터체이스를 가질 수 있게 된다.
2. 객체는 충분히 추상적인 인터페이스를 가질 수 있게 된다.

#### 행동이 상태를 결정한다.
객체를 객체답게 만드는 것은 객체의 상태가 아니라 객체가 다른 객체에게 제공하는 행동이다.

### 역할
#### 역할과 협력
객체는 협력이라는 주어진 문맥 안에서 특정한 목적을 갖게 된다.
객체의 목적은 협력 안에서 객체가 맡게 되는 책임의 집합으로 표시된다.
객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 부른다.

#### 유연하고 재사용 가능한 협력
역할이 중요한 이유는 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있기 때문이다. (추상화)
역할은 다른 것으로 교체할 수 있는 책임의 집합이다.
역할을 이용하면 불필요한 중복 코드를 제거할 수 있다.

#### 객체 대 역할
역할은 객체가 참여할 수 있는 일종의 슬롯
협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주한다.
여러 종류의 객체들이 참여할 수 있다면 역할로 간주한다.

* 단순하게 객체로 시작하고 반복적으로 책임과 협력을 정제해가면서 필요한 순간에 객체로부터 역할을분리해내는 것이 가장 좋은 방법

#### 역할과 추상화
역할은 고옹의 책임을 바탕으로 객체의 종류를 숨기기 때문에 이런 관점에서 역할을 객체의 추상화로 볼 수 있다.
따라서 추상화의 장점은 협력의 관점에서 역할에도 동일하게 적용될 수 있다.
* 협력의 관점에서 역할의 장점 (= 추상화의 장점)
1. 세부 사항에 억눌리지 않고도 상위 수준의 정책을 쉽고 간단하게 표현할 수 있다.
2. 설계를 유연하게 만들 수 있다는 것

#### 배우와 배역
> 협력이라는 문맥 안에서 역할은 특정한 협력에 참여해서 책임을 수행하는 객체의 일부다.
> 일반적으로 역할은 객체가 협력에 참여하는 잠시 동안에만 존재하는 일시적인 개념
> 역할을 모양이나 구조에 의해 정의될 수 없으며 오짓 시스템의 문맥 안에서 무엇을 하는지에 의해서만 정의될 수 있다.